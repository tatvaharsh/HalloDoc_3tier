@model hallodoc_mvc_Repository.ViewModel.EditShift

<div class="modal fade" id="editshiftmodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-info text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">
                    View Shift
                    @if (Model.Status == 0)
                    {
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" style="color:lightpink" width="18" height="18" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="8" />
                            </svg>
                        </span>
                    }
                    else
                    {
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" style="color:lightgreen" width="18" height="18" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="8" />
                            </svg>
                        </span>
                    }
                </h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form asp-action="EditShift" asp-route-shiftdetailid="@Model.ShiftDetailId">
                <div class="modal-body">


                    <div class="form-floating">
                        <select class="form-select mb-3" id="select" asp-for="SelectedRegion" aria-label="Default select example" disabled>

                            @foreach (var region in Model.Regions)
                            {
                                <option value="@region.RegionId">@region.Name</option>
                            }

                        </select>
                        <label for="select">Region</label>
                    </div>


                    <div class="form-floating">
                        <select class="form-select mb-3" id="physicians" asp-for="SelectedPhy" aria-label="Default select example" disabled>
                            @foreach (var phy in Model.Physicians)
                            {
                                <option value="@phy.PhysicianId">@phy.FirstName @phy.LastName</option>
                            }
                        </select>
                        <label for="physicians">Physician</label>
                    </div>


                    <div class="form-floating mb-3">
                        <input type="date" class="form-control toggle-disable" id="shiftdate" asp-for="ShftDate" min=@DateTime.Now.ToString("yyyy-MM-dd") disabled />
                        <label for="shiftdate">Shift Date</label>
                    </div>

                    <div class="row">
                        <div class="col-lg-6 ">
                            <div class="form-floating mb-3">
                                <input type="time" class="form-control toggle-disable" asp-for="StartTime" id="start" disabled />
                                <label for="start">Start</label>
                            </div>
                        </div>
                        <div class="col-lg-6 ">
                            <div class="form-floating mb-3 w-100">
                                <input type="time" class="form-control toggle-disable" asp-for="EndTime" id="end" disabled />
                                <label for="end">End</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    @if (Model.isEditable)
                    {                        
                    <a asp-action="ChangeShiftStatus" asp-route-shiftdetailid="@Model.ShiftDetailId" class="btn btn-info text-white" id="return">Return</a>
                    <button type="button" class="btn btn-info text-white" id="editbtn" onclick="togglebtn()">Edit</button>
                    <button type="submit" class="btn btn-success d-none" id="savebtn">Save</button>
                    <a asp-action="DeleteShiftViaModal" asp-route-shiftdetailid="@Model.ShiftDetailId" class="btn btn-danger" id="deletebtn">Delete</a>
                    }
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function togglebtn() {
        document.querySelectorAll(".toggle-disable").forEach(x => {
            x.removeAttribute("disabled");
        });

        document.getElementById("editbtn").classList.add("d-none");
        document.getElementById("savebtn").classList.remove("d-none");
    }
</script>