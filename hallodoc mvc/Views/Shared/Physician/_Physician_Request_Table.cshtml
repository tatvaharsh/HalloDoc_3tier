@model List<hallodoc_mvc_Repository.ViewModel.AdminDashboard>
@{
 
}
@functions {
    public string GetTableColorClass(int RequstTypeId)
    {
        switch (RequstTypeId)
        {
            case 1: return "pink";
            case 2: return "green";
            case 3: return "orange";
            case 4: return "blue";
            default: return "green";
        }
    }
    public string okok(int Status)
    {
        switch (Status)
        {
            case 1: return "New";
            case 2: return "Pending";
            case 3: return "Close";
            case 4: return "Active";
            case 5: return "Active";
            case 6: return "Conclude";
            case 7: return "Close";
            case 8: return "Close";
            case 9: return "Unpaid";
            default: return "New";
        }
    }
}





<table class="table border-4 d-none d-lg-table" id="adminTable">
    @if (Model.FirstOrDefault() != null)
    {
        <thead class="">
            <tr>
                <th scope="col">Name</th>
                <th scope="col"></th>
                <th scope="col">Phone</th>
                <th scope="col">Address</th>
                @if (Model.FirstOrDefault().Status == 4 || Model.FirstOrDefault().Status == 5)
                {
                    <th scope="col">Status</th>
                    <th scope="col">Chat With</th>
                }


                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var obj in Model)
            {
                <tr class="align-middle table-@{
                            @GetTableColorClass(obj.RequestTypeId)}">

                    <td scope="row">
                        @obj.Name
                    </td>
                    <td scope="row">

                        <a class="btn btn-outline-light p-1" style="font-size:smaller" href="mailto:@obj.Email">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                                <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z" />
                            </svg>
                        </a>

                    </td>

               
                        <td>
                   
                        <a class="btn btn-outline-light d-flex" style="font-size:smaller; width:fit-content;" href="tel:@obj.Phone">

                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-fill mt-1" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                            </svg>
                                @obj.Phone
                        </a>
                        (Patient)
                            @if (obj.RequestTypeId == 1 && obj.RPhone != null)
                            {
                            <a class="btn btn-outline-light p-1 d-flex" style="font-size:smaller" href="tel:@obj.RPhone">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-fill mt-1" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                                </svg>
                                    @obj.RPhone
                            </a>
                            <span>(Business)</span>
                            }
                            @if (obj.RequestTypeId == 3 && obj.RPhone != null)
                            {
                            <a class="btn btn-outline-light p-1 d-flex" style="font-size:smaller" href="tel:@obj.RPhone">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-fill mt-1" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                                </svg>
                                    @obj.RPhone
                            </a>
                            <span>(Relative/Family)</span>
                            }
                            @if (obj.RequestTypeId == 4 && obj.RPhone != null)
                            {
                            <a class="btn btn-outline-light p-1 d-flex" style="font-size:smaller" href="tel:@obj.RPhone">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-fill mt-1" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                                </svg>
                                    @obj.RPhone
                            </a>
                            <span>(Concierge) </span>
                            }
                    
                        </td>
                

                  
                        <td>
                            @obj.Address
                        </td>

                    @if (Model.FirstOrDefault().Status == 4 || Model.FirstOrDefault().Status == 5)
                    {
                        <td>
                            hi<button class="btn btn-outline-light" type="button">Provider</button>
                        </td>
                        <td>
                            hello<button class="btn btn-outline-light" type="button">Provider</button>
                        </td>
                    }

                   

               

                    <td>
                        <div class="dropdown ">
                            <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Actions
                            </button>
                            <ul class="dropdown-menu">

                                @if (Model.FirstOrDefault().Status == 2)
                                {
                                    <li><a class="dropdown-item" asp-action="Accept" asp-route-id="@obj.Id"><i class="fa-solid fa-book me-1"></i> Accept</a></li>

                                }

                                @if (Model.FirstOrDefault().Status == 2 && Model.FirstOrDefault().AcceptedDate!=null)
                                {
                      
                                    <li><a class="dropdown-item" onclick="SendAgreement(@obj.Id ,@obj.RequestTypeId)"><i class="fa-solid fa-handshake me-1"></i>Send Agreement</a></li>
                                    <li><a class="dropdown-item" asp-action="ViewUpload" asp-route-id="@obj.Id"><i class="fa-solid fa-file me-1"></i>View Uploads</a></li>
                                    <li><a class="dropdown-item" onclick="TransferCase(@obj.Id)"><i class="fa-solid fa-paper-plane me-1"></i>Transfer</a></li>
                                }
                                

                                @if (Model.FirstOrDefault().Status == 4 || Model.FirstOrDefault().Status == 5)
                                {

                                    <li><a class="dropdown-item" asp-action="ViewUpload" asp-route-id="@obj.Id"><i class="fa-solid fa-file me-1"></i>View Uploads</a></li>
                                    <li><a class="dropdown-item" asp-action="Encounter" asp-route-id="@obj.Id"><i class="fa-solid fa-file me-1"></i>Encounter</a></li>
                                    <li><a class="dropdown-item" asp-action="Order" asp-route-id="@obj.Id"><i class="fa-solid fa-box me-1"></i>Orders</a></li>
                                }

                                @if (Model.FirstOrDefault().Status == 6)
                                {

                                    <li><a class="dropdown-item" href="#"><i class="fa-solid fa-user-doctor me-1"></i>Conclude Care</a></li>
                                    <li><a class="dropdown-item" asp-action="ViewUpload" asp-route-id="@obj.Id"><i class="fa-solid fa-file me-1"></i>View Uploads</a></li>
                                    <li><a class="dropdown-item" asp-action="Encounter" asp-route-id="@obj.Id"><i class="fa-solid fa-file me-1"></i>Encounter</a></li>
                                
                                }


                   





                                <li><a class="dropdown-item" asp-action="ViewCase" asp-route-id="@obj.Id"><img src="~/SRSScreenShorts/image_2024_03_14T12_14_53_474Z.png" style="height:20px;" class="me-1" />View Case</a></li>
                                <li><a class="dropdown-item" asp-action="ViewNotes" asp-route-id="@obj.Id"><img src="~/SRSScreenShorts//image_2024_03_14T12_14_53_486Z.png" style="height:20px;" class="me-1" />View Notes</a></li>

                            </ul>
                        </div>

                    </td>
                </tr>
            }
        </tbody>
    }
</table>


