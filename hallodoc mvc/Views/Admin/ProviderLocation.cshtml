@model List<hallodoc_mvc_Repository.DataModels.PhysicianLocation>
@{
    ViewData["Title"] = "Provider Locatiopn";
    Layout = ViewBag.Layout;
}
<div class="backdrop" id="backdrop" style="z-index:140"></div>
<div id="loader-container" class="vh-100 align-items-center justify-content-center" style="z-index:150">

    <div class="loader" style="z-index:150"></div>

</div>
<style>
    .tabContent {
        min-height: auto !important;
    }



    .nav-underline .nav-link.active {
        color: #5bc0de !important;
    }

</style>

<div class=" container tab-pane fade show active w-100 w-md-50  px-2 px-md-5 text-center" id="dashboard " role="tabpanel" aria-labelledby="dashboard-tab">

    <div class="d-flex justify-content-between mb-4">

        <h3 class="ms-2">Provider Location</h3>


        <a asp-action="Tabchange" asp-route-nav="1"  class="btn me-3 border rounded border-info text-info">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0" />
            </svg> Back
        </a>

    </div>
    <div class=" border border-5 border-white rounded-3 shadow" id="map" style="height: 60vh;z-index:-1;"></div>
</div>
<script>
    document.getElementById("provider-location-tab").classList.add("active");
    var map = L.map('map');
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    var providers = @Html.Raw(Json.Serialize(Model));

    var markers = [];

    for (var i = 0; i < providers.length; i++) {
        var provider = providers[i];
        
        var marker = L.marker([provider.latitude, provider.longitude])
            .bindPopup("<h4> " + provider.physicianName + "</h4><p> Address: " + provider.address + "</p>")
            .addTo(map);
        markers.push(marker);
    }
    
    var group = L.featureGroup(markers).addTo(map);
    map.fitBounds(group.getBounds());



</script>
